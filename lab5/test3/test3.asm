LAMP	EQU		P2
INITL	EQU		0FEH
LEN		EQU		8H
MARK	EQU		0B
		ORG		0000H
		LJMP	START
		ORG		0030H
START:	MOV		LAMP,#INITL
		LCALL	INIT
MLOOP:	MOV		R5,#LEN
		LCALL	DELAY			
		MOV		A,LAMP
		JB		MARK,T		
		RL		A
		SJMP	D
T:		
		RR		A
D:		MOV		LAMP,A
		SJMP  	MLOOP
INIT:
		SETB	IT0
		SETB	EX0
		SETB	EA
		MOV		R1,#00H
		RET
DELAY:	MOV		R7,#00H
		MOV		R6,#00H
LOOP:	DJNZ	R7,LOOP
		DJNZ	R6,LOOP
		DJNZ	R5,LOOP
		RET
INT0_S:	CLR		EA
		PUSH	PSW
		PUSH	ACC
		MOV		A,LAMP
		PUSH	ACC
		CLR		RS1
		SETB	RS0
		SETB	EA
		JB		MARK,K
		SETB	MARK
		SJMP	O
K:		CLR		MARK
O:		CLR		EA
		POP		ACC
		MOV		LAMP,A
		POP		ACC
		POP		PSW
		SETB	EA
		RETI
		END